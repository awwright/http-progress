<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Byte Range PATCH</title>
<meta content="Austin Wright" name="author">
<meta content="
       This document specifies a media type for PATCH payloads that overwrites a specific byte range, to allow random access writes, or allow a resource to be uploaded in several segments. 
    " name="description">
<meta content="xml2rfc 3.17.2" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="HTTP" name="keyword">
<meta content="draft-wright-http-patch-byterange-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.17.2
    Python 3.10.11
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.2
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.31.0
    setuptools 67.8.0
    six 1.16.0
    wcwidth 0.2.6
-->
<link href="draft-wright-http-patch-byterange.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
  margin-right: 1ch;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Byte Range PATCH</td>
<td class="right">June 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Wright</td>
<td class="center">Expires 8 December 2023</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">HTTP APIs</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-wright-http-patch-byterange-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2023-06-06" class="published">6 June 2023</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Experimental</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2023-12-08">8 December 2023</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">A. Wright</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Byte Range PATCH</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document specifies a media type for PATCH payloads that overwrites a specific byte range, to allow random access writes, or allow a resource to be uploaded in several segments.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 8 December 2023.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-notational-conventions" class="internal xref">Notational Conventions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-modifying-a-content-range-w" class="internal xref">Modifying a content range with PATCH</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-the-content-range-field" class="internal xref">The Content-Range field</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-the-content-length-field" class="internal xref">The Content-Length field</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="auto internal xref">2.3</a>.  <a href="#name-the-content-type-field" class="internal xref">The Content-Type field</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="auto internal xref">2.4</a>.  <a href="#name-other-fields" class="internal xref">Other fields</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="auto internal xref">2.5</a>.  <a href="#name-applying-a-patch" class="internal xref">Applying a patch</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6">
                <p id="section-toc.1-1.2.2.6.1"><a href="#section-2.6" class="auto internal xref">2.6</a>.  <a href="#name-the-multipart-byteranges-me" class="internal xref">The multipart/byteranges media type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.7">
                <p id="section-toc.1-1.2.2.7.1"><a href="#section-2.7" class="auto internal xref">2.7</a>.  <a href="#name-the-message-byterange-media" class="internal xref">The message/byterange media type</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.7.2.1">
                    <p id="section-toc.1-1.2.2.7.2.1.1"><a href="#section-2.7.1" class="auto internal xref">2.7.1</a>.  <a href="#name-syntax" class="internal xref">Syntax</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.8">
                <p id="section-toc.1-1.2.2.8.1"><a href="#section-2.8" class="auto internal xref">2.8</a>.  <a href="#name-the-application-byteranges-" class="internal xref">The application/byteranges media type</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.8.2.1">
                    <p id="section-toc.1-1.2.2.8.2.1.1"><a href="#section-2.8.1" class="auto internal xref">2.8.1</a>.  <a href="#name-syntax-2" class="internal xref">Syntax</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.9">
                <p id="section-toc.1-1.2.2.9.1"><a href="#section-2.9" class="auto internal xref">2.9</a>.  <a href="#name-range-units" class="internal xref">Range units</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-segmented-document-creation" class="internal xref">Segmented document creation with PATCH</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-example" class="internal xref">Example</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-preserving-incomplete-uploa" class="internal xref">Preserving Incomplete Uploads with "Prefer: transaction"</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-registrations" class="internal xref">Registrations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-message-byterange" class="internal xref">message/byterange</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-application-byteranges" class="internal xref">application/byteranges</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-transaction-preference" class="internal xref">"transaction" preference</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-unallocated-ranges" class="internal xref">Unallocated ranges</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-document-size-hints" class="internal xref">Document Size Hints</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-discussion" class="internal xref">Discussion</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.  <a href="#name-indeterminate-length-upload" class="internal xref">Indeterminate Length Uploads</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.  <a href="#name-sparse-documents" class="internal xref">Sparse Documents</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#appendix-A.3" class="auto internal xref">A.3</a>.  <a href="#name-recovering-from-interrupted" class="internal xref">Recovering from interrupted PUT</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#appendix-A.4" class="auto internal xref">A.4</a>.  <a href="#name-truncation" class="internal xref">Truncation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.5">
                <p id="section-toc.1-1.8.2.5.1"><a href="#appendix-A.5" class="auto internal xref">A.5</a>.  <a href="#name-splicing-and-binary-diff" class="internal xref">Splicing and Binary Diff</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Filesystem interfaces typically provide some way to write at a specific position in a file. While HTTP supports reading byte range offsets using the Range header (<span><a href="https://rfc-editor.org/rfc/rfc9110#section-14" class="relref">Section 14</a> of [<a href="#RFC9110" class="cite xref">RFC9110</a>]</span>), this technique cannot generally be used in PUT, because the server may ignore the Content-Range header while executing the write, causing data corruption. However, by using a method and media type that the server must understand, writes to byte ranges with Content-Range semantics becomes possible even when server support is undetermined.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">This media type is intended for use in a wide variety of applications where overwriting specific parts of the file is desired. This includes idempotently writing data to a stream, appending data to a file, overwriting specific byte ranges, or writing to multiple regions in a single operation (for example, appending audio to a recording in progress while updating metadata at the beginning of the file).<a href="#section-1-2" class="pilcrow">¶</a></p>
<div id="notational-conventions">
<section id="section-1.1">
        <h3 id="name-notational-conventions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
"MAY", and "OPTIONAL" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">This document uses ABNF as defined in <span>[<a href="#RFC5234" class="cite xref">RFC5234</a>]</span> and imports grammar rules from <span>[<a href="#RFC9112" class="cite xref">RFC9112</a>]</span>.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">For brevity, example HTTP messages may add newlines or whitespace,
or omit some headers necessary for message transfer.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">The term "byte" is used in the <span>[<a href="#RFC9110" class="cite xref">RFC9110</a>]</span> sense to mean "octet." Ranges are zero-indexed and inclusive. For example, "bytes 0-0" means the first byte of the document, and "bytes 1-2" is a range with two bytes, starting one byte into the document. Ranges of zero bytes are described by an address offset rather than a range. For example, "at byte 5" would separate the byte ranges 0-4 and 5-9.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="modifying-a-content-range-with-patch">
<section id="section-2">
      <h2 id="name-modifying-a-content-range-w">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-modifying-a-content-range-w" class="section-name selfRef">Modifying a content range with PATCH</a>
      </h2>
<p id="section-2-1">The Content-Range field in a PUT request requires support by the server in order to be processed correctly. Without specific support, the server's normal behavior would be to ignore the header, replacing the entire resource with just the part that changed, causing data corruption. To mitigate this, Content-Range may be used in conjunction with the PATCH method <span>[<a href="#RFC5789" class="cite xref">RFC5789</a>]</span> as part of a media type whose semantics are to write at the specified byte offset. This document re-uses the "multipart/byteranges" media type, and defines the "message/byterange" media type, for this purpose.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">A byte range patch lists one or more <em>parts</em>. Each part specifies two essential components:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2-3">
<li id="section-2-3.1">Part fields: a list of HTTP fields that specify metadata, including the range being written to, the length of the body, and information about the target document that cannot be listed in the PATCH headers, e.g. Content-Type (where it would describe the patch itself, rather than the document being updated).<a href="#section-2-3.1" class="pilcrow">¶</a>
</li>
        <li id="section-2-3.2">A part body: the actual data to write to the specified location.<a href="#section-2-3.2" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-2-4">Each part MUST indicate a single contiguous range to be written to. Servers MUST reject byte range patches that don't contain a known range with a 422 or 400 error. (This would mean the client may be using a yet-undefined mechanism to specify the target range.)<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">The simplest form to represent a byte range patch is the "message/byterange" media type, which is similar to an HTTP message:<a href="#section-2-5" class="pilcrow">¶</a></p>
<div class="lang-http sourcecode" id="section-2-6">
<pre>
Content-Range: bytes 2-5/12

wxyz
</pre><a href="#section-2-6" class="pilcrow">¶</a>
</div>
<p id="section-2-7">This patch represents an instruction to write the four bytes "wxyz" at an offset of 2 bytes. A document listing the digits 0-9 in a row, would look like this after applying the patch:<a href="#section-2-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2-8">
<pre>
01wxyz6789␍␊
</pre><a href="#section-2-8" class="pilcrow">¶</a>
</div>
<p id="section-2-9">Although this example is an ASCII document, patches are carried as binary data, and can carry, or partially overwrite, multi-byte characters.<a href="#section-2-9" class="pilcrow">¶</a></p>
<div id="the-content-range-field">
<section id="section-2.1">
        <h3 id="name-the-content-range-field">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-the-content-range-field" class="section-name selfRef">The Content-Range field</a>
        </h3>
<p id="section-2.1-1">The Content-Range field (as seen inside a patch document) is used to specify where in the target document the part body will be written.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">The client MAY indicate the anticipated final size of the document by providing the complete-length form, for example <code>bytes 0-11/12</code>. This value of complete-length does not affect the write, however the server MAY use it for other purposes, especially for preallocating an optimal amount of space, and deciding when an upload in multiple parts has finished.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1-3">If the client does not know or care about the final length of the document, it MAY use <code>*</code> in place of complete-length. For example, <code>bytes 0-11/*</code>. Most random access writes will follow this form.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.1-4">As a special case, a Content-Range where the "last-pos" is omitted indicates that the upload length is indeterminate, and only the starting offset is known:<a href="#section-2.1-4" class="pilcrow">¶</a></p>
<div class="lang-abnf sourcecode" id="section-2.1-5">
<pre>
Content-Range =/ range-unit SP first-pos "-/" ( complete-length / "*" )
</pre><a href="#section-2.1-5" class="pilcrow">¶</a>
</div>
<p id="section-2.1-6">The unsatisfied-range form (e.g. <code>bytes */1000</code>) is not meaningful, it MUST be treated as a syntax error. <span class="cref" id="_1">This form could potentially be used to specify the intended size of the target resource, without providing any data at all.</span><a href="#section-2.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="the-content-length-field">
<section id="section-2.2">
        <h3 id="name-the-content-length-field">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-the-content-length-field" class="section-name selfRef">The Content-Length field</a>
        </h3>
<p id="section-2.2-1">A "Content-Length" part field, if provided, describes the length of the part body. (To describe the size of the entire target resource, see the Content-Range field.)<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">If provided, it MUST exactly match the length of the range specified in the Content-Range field, and servers MUST error when the Content-Length mismatches the length of the range.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="the-content-type-field">
<section id="section-2.3">
        <h3 id="name-the-content-type-field">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-the-content-type-field" class="section-name selfRef">The Content-Type field</a>
        </h3>
<p id="section-2.3-1">A "Content-Type" part field MUST have the same effect as if provided in a PUT request uploading the entire resource (patch applied).
Its use is typically limited to creating resources.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="other-fields">
<section id="section-2.4">
        <h3 id="name-other-fields">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-other-fields" class="section-name selfRef">Other fields</a>
        </h3>
<p id="section-2.4-1">Other part fields in the patch document SHOULD have the same meaning as if provided in a PUT request uploading the entire resource (patch applied).<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<p id="section-2.4-2">Use of such fields SHOULD be limited to cases where the meaning in the HTTP request headers would be different, where they would describe the entire patch, rather than the part. For example, the "Content-Type" field.<a href="#section-2.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="applying-a-patch">
<section id="section-2.5">
        <h3 id="name-applying-a-patch">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-applying-a-patch" class="section-name selfRef">Applying a patch</a>
        </h3>
<p id="section-2.5-1">Servers SHOULD NOT accept requests that write beyond, and not adjacent to, the end of the resource. This would create a sparse file, where some bytes are undefined. For example, writing at byte 601 of a resource where bytes 0-599 are defined; this would leave byte 600 undefined. Servers that accept sparse writes MUST NOT disclose existing content, and SHOULD fill in undefined regions with zeros.<a href="#section-2.5-1" class="pilcrow">¶</a></p>
<p id="section-2.5-2">The expected length of the write can be computed from the part fields. If the actual length of the part body mismatches the expected length, this MUST be treated the same as a network interruption at the shorter length, but anticipating the longer length. Recovering from this interruption may involve rolling back the entire request, or saving as many bytes as possible. The client can then recover the same way it would recover from a network error.<a href="#section-2.5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="the-multipartbyteranges-media-type">
<section id="section-2.6">
        <h3 id="name-the-multipart-byteranges-me">
<a href="#section-2.6" class="section-number selfRef">2.6. </a><a href="#name-the-multipart-byteranges-me" class="section-name selfRef">The multipart/byteranges media type</a>
        </h3>
<p id="section-2.6-1">The following is a request with a "multipart/byteranges" body to write two ranges in a document:<a href="#section-2.6-1" class="pilcrow">¶</a></p>
<div class="lang-example sourcecode" id="section-2.6-2">
<pre>
PATCH /uploads/foo HTTP/1.1
Content-Type: multipart/byteranges; boundary=THIS_STRING_SEPARATES
Content-Length: 206
If-Match: "xyzzy"
If-Unmodified-Since: Sat, 29 Oct 1994 19:43:31 GMT

--THIS_STRING_SEPARATES
Content-Range: bytes 2-6/25
Content-Type: text/plain

23456
--THIS_STRING_SEPARATES
Content-Range: bytes 17-21/25
Content-Type: text/plain

78901
--THIS_STRING_SEPARATES--
</pre><a href="#section-2.6-2" class="pilcrow">¶</a>
</div>
<p id="section-2.6-3">The syntax for multipart messages is defined in <span>[<a href="#RFC2046" class="cite xref">RFC2046</a>], <a href="https://rfc-editor.org/rfc/rfc2046#section-5.1.1" class="relref">Section 5.1.1</a></span>. While the body cannot contain the boundary, servers MAY use the Content-Length field to skip to the boundary (potentially ignoring a boundary in the body, which would be an error by the client).<a href="#section-2.6-3" class="pilcrow">¶</a></p>
<p id="section-2.6-4">The multipart/byteranges type may be used for operations where multiple regions must be updated at the same time; clients may have an expectation that if there's an interruption, all of the parts will be rolled back.<a href="#section-2.6-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="message-byterange">
<section id="section-2.7">
        <h3 id="name-the-message-byterange-media">
<a href="#section-2.7" class="section-number selfRef">2.7. </a><a href="#name-the-message-byterange-media" class="section-name selfRef">The message/byterange media type</a>
        </h3>
<p id="section-2.7-1">When making a request with a single byte range, there is no need for a multipart boundary marker. This document defines a new media type "message/byterange" with the same semantics as a single byte range in a multipart/byteranges message, but with a simplified syntax.<a href="#section-2.7-1" class="pilcrow">¶</a></p>
<p id="section-2.7-2">The "message/byterange" form may be used in a request as so:<a href="#section-2.7-2" class="pilcrow">¶</a></p>
<div class="lang-example sourcecode" id="section-2.7-3">
<pre>
PATCH /uploads/foo HTTP/1.1
Content-Type: message/byterange
Content-Length: 272
If-Match: "xyzzy"
If-Unmodified-Since: Sat, 29 Oct 1994 19:43:31 GMT

Content-Range: bytes 100-299/600
Content-Type: text/plain

[200 bytes...]
</pre><a href="#section-2.7-3" class="pilcrow">¶</a>
</div>
<p id="section-2.7-4">This represents a request to modify a 600-byte document, overwriting 200 bytes of it, starting at a 100-byte offset.<a href="#section-2.7-4" class="pilcrow">¶</a></p>
<div id="syntax">
<section id="section-2.7.1">
          <h4 id="name-syntax">
<a href="#section-2.7.1" class="section-number selfRef">2.7.1. </a><a href="#name-syntax" class="section-name selfRef">Syntax</a>
          </h4>
<p id="section-2.7.1-1">The syntax re-uses concepts from the "multipart/byteranges" media type, except it omits the multipart separator, and so only allows a single range to be specified. It is also similar to the "message/http" media type, except the first line (the status line or request line) is omitted; a message/byterange document can be fed into a message/http parser by first prepending a line like "PATCH / HTTP/1.1".<a href="#section-2.7.1-1" class="pilcrow">¶</a></p>
<p id="section-2.7.1-2">It follows the syntax of HTTP message headers and body. It MUST include the Content-Range header field. If the message length is known by the sender, it SHOULD contain the Content-Length header field. Unknown or nonapplicable header fields MUST be ignored.<a href="#section-2.7.1-2" class="pilcrow">¶</a></p>
<p id="section-2.7.1-3">The field-line and message-body productions are specified in <span>[<a href="#RFC9112" class="cite xref">RFC9112</a>]</span>.<a href="#section-2.7.1-3" class="pilcrow">¶</a></p>
<div class="lang-abnf sourcecode" id="section-2.7.1-4">
<pre>
byterange-document = *( field-line CRLF )
                     CRLF
                     [ message-body ]
</pre><a href="#section-2.7.1-4" class="pilcrow">¶</a>
</div>
<p id="section-2.7.1-5">This document has the same semantics as a single part in a "multipart/byteranges" document (<span><a href="https://rfc-editor.org/rfc/rfc2046#section-5.1.1" class="relref">Section 5.1.1</a> of [<a href="#RFC2046" class="cite xref">RFC2046</a>]</span>) or any response with a 206 (Partial Content) status code (<span><a href="https://rfc-editor.org/rfc/rfc9110#section-15.3.7" class="relref">Section 15.3.7</a> of [<a href="#RFC9110" class="cite xref">RFC9110</a>]</span>). A "message/byterange" document may be trivially transformed into a "multipart/byteranges" document by prepending a dash-boundary and CRLF, and appending a close-delimiter (a CRLF, dash-boundary, terminating "<code>--</code>", and optional CRLF).<a href="#section-2.7.1-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="message-binary">
<section id="section-2.8">
        <h3 id="name-the-application-byteranges-">
<a href="#section-2.8" class="section-number selfRef">2.8. </a><a href="#name-the-application-byteranges-" class="section-name selfRef">The application/byteranges media type</a>
        </h3>
<p id="section-2.8-1">The "application/byteranges" has the same semantics as "multipart/byteranges" but follows a binary format similar to "message/bhttp" <span>[<a href="#RFC9292" class="cite xref">RFC9292</a>]</span>, which may be more suitable for some clients and servers, as all variable length strings are tagged with their length.<a href="#section-2.8-1" class="pilcrow">¶</a></p>
<div id="syntax-1">
<section id="section-2.8.1">
          <h4 id="name-syntax-2">
<a href="#section-2.8.1" class="section-number selfRef">2.8.1. </a><a href="#name-syntax-2" class="section-name selfRef">Syntax</a>
          </h4>
<p id="section-2.8.1-1">Parsing starts by looking for a "Known-Length Message" or an "Indeterminate-Length Message". One or the other is distinguished by the different Framing Indicator.<a href="#section-2.8.1-1" class="pilcrow">¶</a></p>
<p id="section-2.8.1-2">The remainder of the message is parsed by reading fields, then the content, by a method depending on if the message is known-length or indeterminate-length. If there are additional parts, they begin immediately after the end of a Content.<a href="#section-2.8.1-2" class="pilcrow">¶</a></p>
<p id="section-2.8.1-3">The "Known-Length Field Section", "Known-Length Content", "Indeterminate-Length Field Section", "Indeterminate-Length Content", "Indeterminate-Length Content Chunk", "Field Line" definitions are identical to their definition in message/bhttp. They are used in one or more Known-Length Message and/or Indeterminate-Length Message productions, concatenated together.<a href="#section-2.8.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-2.8.1-4">
<pre>
Patch {
  Message (..) ...
}

Known-Length Message {
  Framing Indicator (i) = 8,
  Known-Length Field Section (..),
  Known-Length Content (..),
}

Indeterminate-Length Message  {
  Framing Indicator (i) = 10,
  Indeterminate-Length Field Section (..),
  Indeterminate-Length Content (..),
}

Known-Length Field Section {
  Length (i),
  Field Line (..) ...,
}

Known-Length Content {
  Content Length (i),
  Content (..),
}

Indeterminate-Length Field Section {
  Field Line (..) ...,
  Content Terminator (i) = 0,
}

Indeterminate-Length Content {
  Indeterminate-Length Content Chunk (..) ...,
  Content Terminator (i) = 0,
}

Indeterminate-Length Content Chunk {
  Chunk Length (i) = 1..,
  Chunk (..),
}

Field Line {
  Name Length (i) = 1..,
  Name (..),
  Value Length (i),
  Value (..),
}
</pre><a href="#section-2.8.1-4" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="range-units">
<section id="section-2.9">
        <h3 id="name-range-units">
<a href="#section-2.9" class="section-number selfRef">2.9. </a><a href="#name-range-units" class="section-name selfRef">Range units</a>
        </h3>
<p id="section-2.9-1">Currently, the only defined range unit is "bytes", however this may be other, yet-to-be-defined values.<a href="#section-2.9-1" class="pilcrow">¶</a></p>
<p id="section-2.9-2">In the case of "bytes", the bytes that are read are exactly the same as the bytes that are changed. However, other units may define write semantics different from a read, if symmetric behavior would not make sense. For example, if a Content-Range field adds an item in a JSON array, this write may add a leading or trailing comma, not technically part of the item itself, in order to keep the resulting document well-formed.<a href="#section-2.9-2" class="pilcrow">¶</a></p>
<p id="section-2.9-3">Even though the length in alternate units isn't changed, the byte length might. This might only be acceptable to servers storing these values in a database or memory structure, rather than on a byte-based filesystem.<a href="#section-2.9-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="segmented-document-creation-with-patch">
<section id="section-3">
      <h2 id="name-segmented-document-creation">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-segmented-document-creation" class="section-name selfRef">Segmented document creation with PATCH</a>
      </h2>
<p id="section-3-1">As an alternative to using PUT to create a new resource, the contents of a resource may be uploaded in segments, written across several PATCH requests.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">A user-agent may also use PATCH to recover from an interrupted PUT request, if it was expected to create a new resource. The server will store the data sent to it by the user agent, but will not finalize the upload until the final length of the document is known and received.<a href="#section-3-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3-3">
<li id="section-3-3.1">The client makes a PUT or PATCH request to a URL, a portion of which is generated by the client, to be unpredictable to other clients. This first request creates the resource, and should include <code>If-None-Match: *</code> to verify the target does not exist. If a PUT request, the server reads the Content-Length header and stores the intended final length of the document. If a PATCH request, the "Content-Range" field in the "message/byterange" patch is read for the final length. The final length may also be undefined, and defined in a later request.<a href="#section-3-3.1" class="pilcrow">¶</a>
</li>
        <li id="section-3-3.2">If any request is interrupted, the client may make a HEAD request to determine how much, if any, of the previous response was stored, and resumes uploading from that point. The server will return 200 (OK), but this may only indicate the write has been saved; the server is not obligated to begin acting on the upload until it is complete.<a href="#section-3-3.2" class="pilcrow">¶</a>
</li>
        <li id="section-3-3.3">If the client sees from the HEAD response that additional data remains to be uploaded, it may make a PATCH request to resume uploading. Even if no data was uploaded or the resource was not created, the client should attempt creating the resource with PATCH to mitigate the possibility of another interrupted connection with a server that does not save incomplete transfers. However if in response to PATCH, the server reports 405 (Method Not Allowed), 415 (Unsupported Media Type), or 501 (Not Implemented), then the client must resort to a PUT request.<a href="#section-3-3.3" class="pilcrow">¶</a>
</li>
        <li id="section-3-3.4">The server detects the completion of the final request when the current received data matches the indicated final length. For example, a <code>Content-Range: 500-599/600</code> field is a write at the end of the resource. The server processes the upload and returns a response for it.<a href="#section-3-3.4" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-3-4">For building POST endpoints that support large uploads, clients can first upload the data to a scratch file as described above, and then process by submitting a POST request that links to the scratch file.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">For updating an existing large file, the client can upload to a scratch file, then execute a MOVE (<span><a href="https://rfc-editor.org/rfc/rfc4918#section-9.9" class="relref">Section 9.9</a> of [<a href="#RFC4918" class="cite xref">RFC4918</a>]</span>) over the intended target.<a href="#section-3-5" class="pilcrow">¶</a></p>
<div id="example">
<section id="section-3.1">
        <h3 id="name-example">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-example" class="section-name selfRef">Example</a>
        </h3>
<p id="section-3.1-1">A single PUT request that creates a new resource may be split apart into multiple PATCH requests. Here is an example that uploads a 600-byte document across three 200-byte segments.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">The first PATCH request creates the resource:<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<div class="lang-example sourcecode" id="section-3.1-3">
<pre>
PATCH /uploads/foo HTTP/1.1
Content-Type: message/byterange
Content-Length: 281
If-None-Match: *

Content-Range: bytes 0-199/600
Content-Type: text/plain
Content-Length: 200

[200 bytes...]
</pre><a href="#section-3.1-3" class="pilcrow">¶</a>
</div>
<p id="section-3.1-4">This request allocates a 600 byte document, and uploading the first 200 bytes of it. The server responds with 200, indicating that the complete upload was stored.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1-5">Additional requests upload the remainder of the document:<a href="#section-3.1-5" class="pilcrow">¶</a></p>
<div class="lang-example sourcecode" id="section-3.1-6">
<pre>
PATCH /uploads/foo HTTP/1.1
Content-Type: message/byterange
Content-Length: 283
If-None-Match: *

Content-Range: bytes 200-399/600
Content-Type: text/plain
Content-Length: 200

[200 bytes...]
</pre><a href="#section-3.1-6" class="pilcrow">¶</a>
</div>
<p id="section-3.1-7">This second request also returns 200 (OK).<a href="#section-3.1-7" class="pilcrow">¶</a></p>
<p id="section-3.1-8">A third request uploads the final portion of the document:<a href="#section-3.1-8" class="pilcrow">¶</a></p>
<div class="lang-example sourcecode" id="section-3.1-9">
<pre>
PATCH /uploads/foo HTTP/1.1
Content-Type: message/byterange
Content-Length: 283
If-None-Match: *

Content-Range: bytes 200-399/600
Content-Type: text/plain
Content-Length: 200

[200 bytes...]
</pre><a href="#section-3.1-9" class="pilcrow">¶</a>
</div>
<p id="section-3.1-10">The server responds with 200 (OK). Since this completely writes out the 600-byte document, the server may also perform final processing, for example, checking that the document is well formed. The server MAY return an error code if there is a syntax or other error, or in an earlier response as soon as it it able to detect an error, however the exact behavior is left undefined.<a href="#section-3.1-10" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="prefer-transaction">
<section id="section-4">
      <h2 id="name-preserving-incomplete-uploa">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-preserving-incomplete-uploa" class="section-name selfRef">Preserving Incomplete Uploads with "Prefer: transaction"</a>
      </h2>
<p id="section-4-1">The stateless design of HTTP generally implies that a request is atomic (otherwise parties would need to keep track of the state of a request while it's in progress). A benefit of this design is that a client does not need to be concerned with the side-effects of only the first half of an upload being honored, if there's an error partway through.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">However, some clients may desire partial state changes, particularly when remaking the upload is more expensive than the complexity of recovering from an interruption. In these cases, clients will want an incomplete request to be preserved as much as possible, so they may re-synchronize the state and pick up from where the incomplete request was terminated.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">The client's preference for atomic or upload-preserving behavior may be signaled by a Prefer header:<a href="#section-4-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4-4">
<pre>
Prefer: transaction=atomic
Prefer: transaction=persist
</pre><a href="#section-4-4" class="pilcrow">¶</a>
</div>
<p id="section-4-5">The <code>transaction=atomic</code> preference indicates that the request SHOULD apply only when a successful response is returned, and not any time during the upload.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">The <code>transaction=persist</code> preference indicates that uploaded data SHOULD be continuously stored as soon as possible, so that if the upload is interrupted, it is possible to resume the upload from where it left off.<a href="#section-4-6" class="pilcrow">¶</a></p>
<p id="section-4-7">This preference is generally applicable to any HTTP request (and not merely for PATCH or byte range patches). Servers SHOULD indicate when this preference was honored, using a "Preference-Applied" response header. For example:<a href="#section-4-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4-8">
<pre>
Preference-Applied: transaction=persist
</pre><a href="#section-4-8" class="pilcrow">¶</a>
</div>
<p id="section-4-9">Servers may consider broadcasting this in a 103 Early Hints response, since once point the final response is written, this may no longer be useful to know.<a href="#section-4-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="registrations">
<section id="section-5">
      <h2 id="name-registrations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-registrations" class="section-name selfRef">Registrations</a>
      </h2>
<div id="messagebyterange">
<section id="section-5.1">
        <h3 id="name-message-byterange">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-message-byterange" class="section-name selfRef">message/byterange</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-5.1-1">
          <dt id="section-5.1-1.1">Type name:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.2">
            <p id="section-5.1-1.2.1">message<a href="#section-5.1-1.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.3">Subtype name:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.4">
            <p id="section-5.1-1.4.1">byterange<a href="#section-5.1-1.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.5">Required parameters:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.6">
            <p id="section-5.1-1.6.1">N/A<a href="#section-5.1-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.7">Optional parameters:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.8">
            <p id="section-5.1-1.8.1">N/A<a href="#section-5.1-1.8.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.9">Encoding considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.10">
            <p id="section-5.1-1.10.1">binary<a href="#section-5.1-1.10.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.11">Security considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.12">
            <p id="section-5.1-1.12.1">See <a href="#security-considerations" class="auto internal xref">Section 6</a><a href="#section-5.1-1.12.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.13">Interoperability considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.14">
            <p id="section-5.1-1.14.1">See <a href="#message-byterange" class="auto internal xref">Section 2.7</a> of this document<a href="#section-5.1-1.14.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.15">Published specification:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.16">
            <p id="section-5.1-1.16.1">This document<a href="#section-5.1-1.16.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.17">Applications that use this media type:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.18">
            <p id="section-5.1-1.18.1">HTTP applications that process filesystem-like writes to locations within a resource.<a href="#section-5.1-1.18.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.19">Fragment identifier considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.20">
            <p id="section-5.1-1.20.1">N/A<a href="#section-5.1-1.20.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.21">Additional information:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.22">
            <span class="break"></span><dl class="dlCompact dlParallel" id="section-5.1-1.22.1">
              <dt id="section-5.1-1.22.1.1">Deprecated alias names for this type:</dt>
              <dd style="margin-left: 1.5em" id="section-5.1-1.22.1.2">N/A<a href="#section-5.1-1.22.1.2" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.1-1.22.1.3">Magic number(s):</dt>
              <dd style="margin-left: 1.5em" id="section-5.1-1.22.1.4">N/A<a href="#section-5.1-1.22.1.4" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.1-1.22.1.5">File extension(s):</dt>
              <dd style="margin-left: 1.5em" id="section-5.1-1.22.1.6">N/A<a href="#section-5.1-1.22.1.6" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.1-1.22.1.7">Macintosh file type code(s):</dt>
              <dd style="margin-left: 1.5em" id="section-5.1-1.22.1.8">N/A<a href="#section-5.1-1.22.1.8" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.23">Person and email address to contact for further information:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.24">
            <p id="section-5.1-1.24.1">See Authors' Addresses section.<a href="#section-5.1-1.24.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.25">Intended usage:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.26">
            <p id="section-5.1-1.26.1">COMMON<a href="#section-5.1-1.26.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.27">Restrictions on usage:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.28">
            <p id="section-5.1-1.28.1">None.<a href="#section-5.1-1.28.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.29">Author:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.30">
            <p id="section-5.1-1.30.1">See Authors' Addresses section.<a href="#section-5.1-1.30.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-1.31">Change controller:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-1.32">
            <p id="section-5.1-1.32.1">IESG<a href="#section-5.1-1.32.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="applicationbyteranges">
<section id="section-5.2">
        <h3 id="name-application-byteranges">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-application-byteranges" class="section-name selfRef">application/byteranges</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-5.2-1">
          <dt id="section-5.2-1.1">Type name:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.2">
            <p id="section-5.2-1.2.1">application<a href="#section-5.2-1.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.3">Subtype name:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.4">
            <p id="section-5.2-1.4.1">byteranges<a href="#section-5.2-1.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.5">Required parameters:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.6">
            <p id="section-5.2-1.6.1">N/A<a href="#section-5.2-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.7">Optional parameters:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.8">
            <p id="section-5.2-1.8.1">N/A<a href="#section-5.2-1.8.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.9">Encoding considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.10">
            <p id="section-5.2-1.10.1">binary<a href="#section-5.2-1.10.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.11">Security considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.12">
            <p id="section-5.2-1.12.1">See <a href="#security-considerations" class="auto internal xref">Section 6</a><a href="#section-5.2-1.12.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.13">Interoperability considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.14">
            <p id="section-5.2-1.14.1">See <a href="#message-binary" class="auto internal xref">Section 2.8</a> of this document<a href="#section-5.2-1.14.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.15">Published specification:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.16">
            <p id="section-5.2-1.16.1">This document<a href="#section-5.2-1.16.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.17">Applications that use this media type:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.18">
            <p id="section-5.2-1.18.1">HTTP applications that process filesystem-like writes to locations within a resource.<a href="#section-5.2-1.18.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.19">Fragment identifier considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.20">
            <p id="section-5.2-1.20.1">N/A<a href="#section-5.2-1.20.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.21">Additional information:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.22">
            <span class="break"></span><dl class="dlCompact dlParallel" id="section-5.2-1.22.1">
              <dt id="section-5.2-1.22.1.1">Deprecated alias names for this type:</dt>
              <dd style="margin-left: 1.5em" id="section-5.2-1.22.1.2">N/A<a href="#section-5.2-1.22.1.2" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2-1.22.1.3">Magic number(s):</dt>
              <dd style="margin-left: 1.5em" id="section-5.2-1.22.1.4">N/A<a href="#section-5.2-1.22.1.4" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2-1.22.1.5">File extension(s):</dt>
              <dd style="margin-left: 1.5em" id="section-5.2-1.22.1.6">N/A<a href="#section-5.2-1.22.1.6" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.2-1.22.1.7">Macintosh file type code(s):</dt>
              <dd style="margin-left: 1.5em" id="section-5.2-1.22.1.8">N/A<a href="#section-5.2-1.22.1.8" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.23">Person and email address to contact for further information:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.24">
            <p id="section-5.2-1.24.1">See Authors' Addresses section.<a href="#section-5.2-1.24.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.25">Intended usage:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.26">
            <p id="section-5.2-1.26.1">COMMON<a href="#section-5.2-1.26.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.27">Restrictions on usage:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.28">
            <p id="section-5.2-1.28.1">None.<a href="#section-5.2-1.28.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.29">Author:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.30">
            <p id="section-5.2-1.30.1">See Authors' Addresses section.<a href="#section-5.2-1.30.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-1.31">Change controller:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-1.32">
            <p id="section-5.2-1.32.1">IESG<a href="#section-5.2-1.32.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="transaction-preference">
<section id="section-5.3">
        <h3 id="name-transaction-preference">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-transaction-preference" class="section-name selfRef">"transaction" preference</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-5.3-1">
          <dt id="section-5.3-1.1">Preference:</dt>
          <dd style="margin-left: 1.5em" id="section-5.3-1.2">
            <p id="section-5.3-1.2.1">transaction<a href="#section-5.3-1.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-1.3">Value:</dt>
          <dd style="margin-left: 1.5em" id="section-5.3-1.4">
            <p id="section-5.3-1.4.1">either "atomic" or "persist"<a href="#section-5.3-1.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-1.5">Description:</dt>
          <dd style="margin-left: 1.5em" id="section-5.3-1.6">
            <p id="section-5.3-1.6.1">Specify if the client would prefer incomplete uploads to be saved, or committed only on success.<a href="#section-5.3-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-1.7">Reference:</dt>
          <dd style="margin-left: 1.5em" id="section-5.3-1.8">
            <p id="section-5.3-1.8.1"><a href="#prefer-transaction" class="auto internal xref">Section 4</a><a href="#section-5.3-1.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<div id="unallocated-ranges">
<section id="section-6.1">
        <h3 id="name-unallocated-ranges">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-unallocated-ranges" class="section-name selfRef">Unallocated ranges</a>
        </h3>
<p id="section-6.1-1">A byterange patch may permit writes to offsets beyond the end of the resource. This may have non-obvious behavior.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">Servers supporting sparse files MUST NOT return uninitialized memory or storage contents. Uninitialized regions may be initialized prior to executing the write, or this may be left to the filesystem if it can guarantee that unallocated space will be read as a constant value.<a href="#section-6.1-2" class="pilcrow">¶</a></p>
<p id="section-6.1-3">If a server fills in unallocated space by initializing it, servers SHOULD protect against patches that make writes to very large offsets. Servers may account for this by treating it as a write by the client, similar to "Document Size Hints" below.<a href="#section-6.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="document-size-hints">
<section id="section-6.2">
        <h3 id="name-document-size-hints">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-document-size-hints" class="section-name selfRef">Document Size Hints</a>
        </h3>
<p id="section-6.2-1">A byte range patch is, overall, designed to require server resources that's proportional to the patch size. One possible exception to this rule is the complete-length part of the Content-Range field, which hints at the final upload size. Generally, this does not require the server to (immediately) allocate this amount of data. However, some servers may choose to begin preallocating disk space right away, which could be a very expensive operation compared to the actual size of the request.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">In general, servers SHOULD treat the complete-length hint the same as a PUT request of that size, and issue a 400 (Client Error). <span class="cref" id="_3">413 (Payload Too Large) might not be appropriate for this situation, as it would indicate the patch is too large and the client should break up the patches into smaller chunks, rather than the intended final upload size being too large.</span><a href="#section-6.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-7">
      <h2 id="name-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-normative-references">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5234">[RFC5234]</dt>
        <dd>
<span class="refAuthor">Crocker, D., Ed.</span> and <span class="refAuthor">P. Overell</span>, <span class="refTitle">"Augmented BNF for Syntax Specifications: ABNF"</span>, <span class="seriesInfo">STD 68</span>, <span class="seriesInfo">RFC 5234</span>, <span class="seriesInfo">DOI 10.17487/RFC5234</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5234">https://www.rfc-editor.org/rfc/rfc5234</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9110">[RFC9110]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP Semantics"</span>, <span class="seriesInfo">STD 97</span>, <span class="seriesInfo">RFC 9110</span>, <span class="seriesInfo">DOI 10.17487/RFC9110</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9110">https://www.rfc-editor.org/rfc/rfc9110</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9112">[RFC9112]</dt>
      <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP/1.1"</span>, <span class="seriesInfo">STD 99</span>, <span class="seriesInfo">RFC 9112</span>, <span class="seriesInfo">DOI 10.17487/RFC9112</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9112">https://www.rfc-editor.org/rfc/rfc9112</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-7.2">
        <h3 id="name-informative-references">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC2046">[RFC2046]</dt>
        <dd>
<span class="refAuthor">Freed, N.</span> and <span class="refAuthor">N. Borenstein</span>, <span class="refTitle">"Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types"</span>, <span class="seriesInfo">RFC 2046</span>, <span class="seriesInfo">DOI 10.17487/RFC2046</span>, <time datetime="1996-11" class="refDate">November 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2046">https://www.rfc-editor.org/rfc/rfc2046</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4918">[RFC4918]</dt>
        <dd>
<span class="refAuthor">Dusseault, L., Ed.</span>, <span class="refTitle">"HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)"</span>, <span class="seriesInfo">RFC 4918</span>, <span class="seriesInfo">DOI 10.17487/RFC4918</span>, <time datetime="2007-06" class="refDate">June 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4918">https://www.rfc-editor.org/rfc/rfc4918</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5789">[RFC5789]</dt>
        <dd>
<span class="refAuthor">Dusseault, L.</span> and <span class="refAuthor">J. Snell</span>, <span class="refTitle">"PATCH Method for HTTP"</span>, <span class="seriesInfo">RFC 5789</span>, <span class="seriesInfo">DOI 10.17487/RFC5789</span>, <time datetime="2010-03" class="refDate">March 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5789">https://www.rfc-editor.org/rfc/rfc5789</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9292">[RFC9292]</dt>
      <dd>
<span class="refAuthor">Thomson, M.</span> and <span class="refAuthor">C. A. Wood</span>, <span class="refTitle">"Binary Representation of HTTP Messages"</span>, <span class="seriesInfo">RFC 9292</span>, <span class="seriesInfo">DOI 10.17487/RFC9292</span>, <time datetime="2022-08" class="refDate">August 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9292">https://www.rfc-editor.org/rfc/rfc9292</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="discussion">
<section id="appendix-A">
      <h2 id="name-discussion">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-discussion" class="section-name selfRef">Discussion</a>
      </h2>
<p id="appendix-A-1"><span class="cref" id="_4">This section to be removed before final publication.</span><a href="#appendix-A-1" class="pilcrow">¶</a></p>
<div id="indeterminate-length-uploads">
<section id="appendix-A.1">
        <h3 id="name-indeterminate-length-upload">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-indeterminate-length-upload" class="section-name selfRef">Indeterminate Length Uploads</a>
        </h3>
<p id="appendix-A.1-1">There is no standard way for a Content-Range header to indicate an unknown or indeterminate-length body starting at a certain offset; the design of partial content messages requires that the sender know the total length before transmission. However it seems it should be possible to generate an indeterminate-length partial content response (e.g. return a continuously growing audio file starting at a 4MB offset). Fixing this would require a new header, update to HTTP, or a revision of HTTP.<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sparse-documents">
<section id="appendix-A.2">
        <h3 id="name-sparse-documents">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-sparse-documents" class="section-name selfRef">Sparse Documents</a>
        </h3>
<p id="appendix-A.2-1">This pattern can enable multiple, parallel uploads to a document at the same time. For example, uploading a large log file from multiple devices. However, this document does not define any ways for clients to track the unwritten regions in sparse documents, and the existing conditional request headers are designed to cause conflicts. Parallel uploads may require a byte-level locking scheme or conflict-free operators. This may be addressed in a later document.<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="recovering-from-interrupted-put">
<section id="appendix-A.3">
        <h3 id="name-recovering-from-interrupted">
<a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-recovering-from-interrupted" class="section-name selfRef">Recovering from interrupted PUT</a>
        </h3>
<p id="appendix-A.3-1">Servers do not necessarily save the results of an incomplete upload; since most clients prefer atomic writes, many servers will discard an incomplete upload. A mechanism to indicate a preference for atomic vs. non-atomic writes may be defined at a later time.<a href="#appendix-A.3-1" class="pilcrow">¶</a></p>
<p id="appendix-A.3-2">Byte range PATCH cannot by itself be used to recover from an interrupted PUT that updates an existing document. If the server operation is atomic, the entire operation will be lost. If the server saves the upload, it may not possible to know how much of the request was received by the server, and what was old content that already existed.<a href="#appendix-A.3-2" class="pilcrow">¶</a></p>
<p id="appendix-A.3-3">One technique would be to use a 1xx interim response to indicate a location where the partial upload is being stored. If PUT request is interrupted, the client can make PATCH requests to this temporary, non-atomic location to complete the upload. When the last part is uploaded, the original interrupted PUT request will finish.<a href="#appendix-A.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="truncation">
<section id="appendix-A.4">
        <h3 id="name-truncation">
<a href="#appendix-A.4" class="section-number selfRef">A.4. </a><a href="#name-truncation" class="section-name selfRef">Truncation</a>
        </h3>
<p id="appendix-A.4-1">One currently unspecified operation that could be useful is the ability to resize the document without specifying any content for it. Especially truncating the document to zero bytes, or some other length. The unsatisfied-range form could potentially be used this:<a href="#appendix-A.4-1" class="pilcrow">¶</a></p>
<div class="lang-example sourcecode" id="appendix-A.4-2">
<pre>
PATCH /logs.txt HTTP/1.1
Content-Type: message/byterange
Content-Length: 28
If-Match: "foo"

Content-Range: bytes */0

</pre><a href="#appendix-A.4-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="splicing-and-binary-diff">
<section id="appendix-A.5">
        <h3 id="name-splicing-and-binary-diff">
<a href="#appendix-A.5" class="section-number selfRef">A.5. </a><a href="#name-splicing-and-binary-diff" class="section-name selfRef">Splicing and Binary Diff</a>
        </h3>
<p id="appendix-A.5-1">Operations more complicated than standard filesystem operations are out of scope for this media type. A feature of byte range patch is an upper limit on the complexity of applying the patch. In contrast, prepending, splicing, replace, or other complicated file operations could potentially require the entire file on disk be rewritten.<a href="#appendix-A.5-1" class="pilcrow">¶</a></p>
<p id="appendix-A.5-2">Consider registering a media type for VCDIFF in this document, under the topic of "Media type registrations for byte-level patching".<a href="#appendix-A.5-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Austin Wright</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:aaa@bzfx.net" class="email">aaa@bzfx.net</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
